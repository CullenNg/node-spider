const DoubanSpider = require('./library/douban.js');
const Familymart = require('./library/familymart.js');

// 实例化
const spider = new DoubanSpider({
    // 头信息
    headers: {
        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3',
        'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,ja;q=0.7',
        'Cache-Control': 'no-cache',
        'Connection': 'keep-alive',
        'Host': 'www.douban.com',
        "Pragma": 'no-cache',
        "Referer": 'https://www.douban.com/group/search?start=50&cat=1013&sort=time&q=%E6%B7%B1%E5%9C%B3%E8%BD%AC%E7%A7%9F',
        "User-Agent": 'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/78.0.3904.108 Safari/537.36',
        "Sec-Fetch-Mode": "navigate",
        "Sec-Fetch-Site": "same-origin",
        "Sec-Fetch-User": "?1",
        "Upgrade-Insecure-Requests": "1",
        "Cookie": 'bid=0sUsEBmcOQs; douban-fav-remind=1; __yadk_uid=C2yeKZb2dyOsRzzLtiISRzWHwJfCNrQc; trc_cookie_storage=taboola%2520global%253Auser-id%3D73554637-19be-447f-bcc5-75fd5bacbdd6-tuct44138d9; viewed="3132277"; _vwo_uuid_v2=D5F155863650A81F352D411C810B62B25|89a1cf0c81a0ad5b76d5b098c2d39f14; gr_user_id=ab13c279-522f-490d-a407-329da8944963; __gads=Test; ct=y; ap_v=0,6.0; _pk_ref.100001.8cb4=%5B%22%22%2C%22%22%2C1575447094%2C%22https%3A%2F%2Fwww.baidu.com%2Flink%3Furl%3DNc_ehYaIS4-93VgUBss__mgF6Y-h-oWkqPhoblutJctv8y3oFi-XW-0SxbkIbtaKJETpj2E_KWkNWwhKypVbG_%26wd%3D%26eqid%3D8eb4a89300024757000000065de76a06%22%5D; _pk_ses.100001.8cb4=*; __utma=30149280.863424606.1565608081.1575273681.1575447097.6; __utmc=30149280; __utmz=30149280.1575447097.6.6.utmcsr=baidu|utmccn=(organic)|utmcmd=organic; __utmt=1; _pk_id.100001.8cb4=3c6c1c08d1368d2d.1568976873.4.1575451605.1575275771.; __utmb=30149280.381.9.1575451604935',
    },
    // 屏蔽列表
    blockList: [
        '龙华',
        '沙井',
        '福永',
        '光明',
    ],
});

// 开始抓取数据
// spider.start('宝安租房');


const familymartSpider = new Familymart({
    // 头信息
    headers: {
        'Accept': 'text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8,application/signed-exchange;v=b3',
        'Accept-Language': 'zh-CN,zh;q=0.9,en;q=0.8,ja;q=0.7',
        'Cache-Control': 'no-cache',
        'Connection': 'keep-alive',
        'Host': 'api.map.com.tw',
        "Pragma": 'no-cache',
        "Referer": 'https://www.family.com.tw/',
        "sec-ch-ua": `"Chromium";v="92", " Not A;Brand";v="99", "Google Chrome";v="92"`,
        "sec-ch-ua-mobile": `?0`,
        "Sec-Fetch-Dest": `script`,
        "Sec-Fetch-Mode": `no-cors`,
        "Sec-Fetch-Site": `cross-site`,
        "User-Agent": `Mozilla/5.0 (Macintosh; Intel Mac OS X 10_14_6) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/92.0.4515.107 Safari/537.36`,
    }
});
// const list = [ '018689',];
const list = ['018689','018563','019900','012565','017867','019098','016652','016455','014689','014688','017986','019311','014867','016917','019584','006598','018558','018559','018685','018686','018141','018519','018520','018687','018560','018445','015201','019685','015589','019218','014490','019181','015063','014322','018768','014745','018317','014801','017338','017899','014715','015295','013480','016922','012544','019343','013570','013797','017811','017820','019683','015161','018903','011881','017138','014918','014261','014159','017186','013409','014770','014482','016322','020005','015461','020007','018480','013639','017962','014905','018752','018561','015246','016604','018300','014769','016138','017989','015265','015083','019781','012588','018254','019959','014438','017940','013571','014987','014540','019595','014389','014686','014455','014838','017098','009489','012857','014391','013902','015371','016673','019598','014042','014663','014943','013730','014772','018852','017777','014576','019400','018875','013158','019034','010358','013719','014182','011950','019084','017313','019240','013827','018877','017125','015455','018414','015272','015962','012688','016221','013294','014925','014306','012836','013712','012976','018565','019305','017065','012878','016528','019909','015249','012413','012998','017288','019574','013020','012877','015122','019904','014840','017650','016527','017097','012835','013151','015085','017926','016358','015290','012475','014466','018482','017055','012373','015975','015370','018951','013001','012956','015919','014995','019782','012395','012957','014993','017156','014503','016530','018905','018783','013000','014891','015205','018721','018720','012914','012590','014611','018165','015735','016000','017179','016846','015127','016069','020043','013562','014329','011655','020019','014701','016205','015007','013985','018692','018562','014700','018741','015088','012550','016115','018418','019301','014776','013022','015003','017019','019114','019617','012508','014920','012152','020024','012111','019421','014580','012608','016776','019967','019619','018367','017682','017660','018833','012416','018446','014946','016942','019144','018230','015437','012288','016617','017967','016437','014807','017557','016987','018113','014640','013066','013618','014921','012464','016529','015160','012355','012586','018540','017558','013676','014340','019954','017445','019627','012987','014537','018843','016442','016383','017896','014491','018235','018888','014892','014359','016097','015299','012940','017257','017346','016897','017461','019058','018510','017260','012916','015011','012693','012989','012510','012628','014650','016286','017868','013051','012707','019069','012629','014309','018548','012630','017532','015146','017166','014129','019591','018718','019592','014286','015297','015811','018509','018506','018725','017409','014530','015331','014950','017373','014439','012398','018736','014339','019678','012776','018233','018056','017010','014827','017757','017242','014310','012583','016328','017158','017220','018356','018144','015236','015170','017758','017436','016886','016662','012918','012388','020034','017423','016955','012633','018988','012430','013321','016988','017608','017006','013955','017128','012478','012424','013741','014443','018289','016858','019694','020014','018697','014498','012459','015180','016160','017161','018408','012595','020029','014063','017051','019778','019679','016810','013856','017222','017771','012778','017599','018673','017016','015966','012923','018071','017803','012461','017453','019073','014781','016718','018977','018972','017582','018748','014900','017566','017491','018291','015402','017587','019390','017586','017673','017952','019105','012250','012120','012901','018476','018698','019076','012726','012517','018172','016107','020002','019430','016046','018218','018802','016998','015219','012406','015983','012905','015969','016906','015620','018333','017860','014405','012496','017958','017240','016512','016410','018293','013417','015817','016085','012328','013072','012620','013990','015417','018571','013837','019231','015259','013172','018659','015838','012779','012690','012596','014465','015303','016369','016370','018866','014370','014761','019899','017418','017649','016489','015113','015382','014403','018700','012598','012563','018607','017635','018530','014738','016116','015878','012522','012655','017329','016166','012984','014793','018481','017551','018569','015990','017290','013965','012662','015548','015512','012696','015240','015319','014780','012279','019568','017265','017266','014586','014967','016778','019658','019613','015876','016332','012885','017028','014847','012451','015057','019634','016308','013422','016975','018465','016937','017321','017036','014062','012672','012887','016783','012320','015279','016933','012163','012330','019200','018489','018076','012305','012304','017998','019451','016716','012491','014117','012870','014583','014245','014726','017127','015178','018103','012803','012536','019480','018381','018695','015327','018065','012561','013560','014452','020003','012271','018696','013609','014520','019758','015835','018625','017005','019234','013013','012823','017215','015211','014653','014518','5801131','6214066' ]

let i = 0;
setInterval(() => {
    const store_num = list[i];
    store_num && familymartSpider.start(store_num);
    i++;
}, 200);

// familymartSpider.start(list);
